var Juno=null;
(function(){Juno=angular.module("Juno",["ngRoute","ngResource"]);Juno.factory("Queue",["$resource",function(a){return a("queue/:queue.json",{},{})}]);Juno.factory("Consumer",["$resource",function(a){return a("consumer.json",{},{})}]);Juno.factory("Info",["$resource",function(a){return a("info.json",{},{})}]);Juno.controller("DefaultController",["$rootScope","$route",function(a,b){a.isCollapsed=!1;a.route=b}]);Juno.controller("InfoController",["$scope","Info",function(a,b){a.info=b.get()}]);Juno.controller("QueuesController",
["$scope","Queue",function(a,b){a.queues=b.query()}]);Juno.controller("QueueController",["$scope","$routeParams","Queue",function(a,b,d){a.page=parseInt(b.page)||1;a.pages=1;a.queue={name:b.queue,messages:[]};d.get({queue:b.queue,offset:10*(a.page-1)},function(f){a.pages=Math.ceil(f.count/10);a.queue=f});a["delete"]=function(){d["delete"]({queue:b.queue})}}]);Juno.controller("FailedController",["$controller","$scope","$routeParams","Queue",function(a,b,d,f){d.queue="failed";a("QueueController",{$scope:b,
$routeParams:d,Queue:f})}]);Juno.controller("ConsumersController",["$scope","Consumer",function(a,b){a.consumers=b.query()}]);Juno.config(["$routeProvider","$locationProvider",function(a,b){b.html5Mode(!0);a.when("/",{templateUrl:"overview",name:"overview"});a.when("/info",{templateUrl:"info",controller:"InfoController",name:"info"});a.when("/queue",{templateUrl:"queues",controller:"QueuesController",name:"queue"});a.when("/queue/failed",{templateUrl:"queue",controller:"FailedController",name:"failed"});
a.when("/queue/:queue",{templateUrl:"queue",controller:"QueueController",name:"queues"});a.when("/consumer",{templateUrl:"consumers",controller:"ConsumersController",name:"consumers"});a.otherwise({redirectTo:"/"})}])})();
(function(){Juno.filter("ucfirst",function(){return function(a){return a.charAt(0).toUpperCase()+a.slice(1)}});Juno.filter("empty",function(){return function(a){return angular.equals({},a)||angular.equals([],a)}});Juno.filter("pagination",function(){return function(a,b,d){b=Math.min(b,d);var f=Math.max(b-6,0);return Array.apply(null,Array(Math.min(b+5,d)-f)).map(function(a,b){return f+b})}});Juno.filter("timeAgo",function(){return function(a,b,d){return{execute:function(a,b,c){var e;if(void 0===a||
null===a||1>b)return null;a=new Date(a);if(void 0===b||null===b)b=1;c=void 0===c||null===c?new Date:new Date(c);e=this.calculateDifference(c,a);if(0===e)return"just now";e=this.groupDifference(e);e=this.applyAccuracy(e,b);return this.toString(e,a>c)},calculateDifference:function(a,b){return Math.abs(Math.round((a-b)/1E3))},groupDifference:function(a){var b=[],c={year:31536E3,month:2678400,week:604800,day:86400,hour:3600,minute:60,second:1},e,d,g,h;for(e in c)d=c[e],g=Math.floor(a/d),h=this.formatGroup(g,
e),(null!==h||0<b.length)&&b.push(h),a-=g*d;return b},formatGroup:function(a,b){return 1>a?null:a+" "+b+(1<a?"s":"")},applyAccuracy:function(a,b){a.length=Math.min(a.length,b);return a},toString:function(a,b){var c;a=this.removeNullValues(a);c=this.joinArray(a);return b?"in "+c:c+" ago"},removeNullValues:function(a){var b,c=[];for(b=0;b!==a.length;b++)null!==a[b]&&c.push(a[b]);return c},joinArray:function(a){return 1===a.length?a[0]:a.slice(0,-1).join(" ")+" and "+a[a.length-1]}}.execute(a,b,d)}})})();
