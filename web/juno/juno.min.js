var Juno=null;
(function(){Juno=angular.module("Juno",["ngRoute","ngResource"]);Juno.factory("Queue",["$resource",function(a){return a("queue/:queue.json",{},{})}]);Juno.factory("Consumer",["$resource",function(a){return a("consumer.json",{},{})}]);Juno.factory("Info",["$resource",function(a){return a("info.json",{},{})}]);Juno.controller("DefaultController",["$scope","$route",function(a,b){a.isCollapsed=!1;a.route=b}]);Juno.controller("InfoController",["$scope","Info",function(a,b){a.info=b.get()}]);Juno.controller("QueuesController",
["$scope","Queue",function(a,b){a.queues=b.query()}]);Juno.controller("QueueController",["$scope","$routeParams","Queue",function(a,b,c){a.page=parseInt(b.page)||1;a.pages=1;a.queue=c.get({queue:b.queue,offset:10*(a.page-1)},function(d){a.pages=Math.ceil(d.count/10)});a["delete"]=function(){c["delete"]({queue:b.queue})}}]);Juno.controller("FailedController",["$controller","$scope","$routeParams","Queue",function(a,b,c,d){c.queue="failed";a("QueueController",{$scope:b,$routeParams:c,Queue:d})}]);Juno.controller("ConsumersController",
["$scope","Consumer",function(a,b){a.consumers=b.query()}]);Juno.config(["$routeProvider","$locationProvider",function(a,b){b.html5Mode(!0);a.when("/",{templateUrl:"template/overview",name:"overview"});a.when("/info",{templateUrl:"template/info",controller:"InfoController",name:"info"});a.when("/queue",{templateUrl:"template/queues",controller:"QueuesController",name:"queue"});a.when("/queue/failed",{templateUrl:"template/queue",controller:"FailedController",name:"failed"});a.when("/queue/:queue",
{templateUrl:"template/queue",controller:"QueueController",name:"queues"});a.when("/consumer",{templateUrl:"template/consumers",controller:"ConsumersController",name:"consumers"});a.otherwise({redirectTo:"/"})}])})();
(function(){Juno.filter("empty",function(){return function(a){return angular.equals({},a)||angular.equals([],a)}});Juno.filter("pagination",function(){return function(a,b,c){b=Math.min(b,c);var d=Math.max(b-6,0);return Array.apply(null,Array(Math.min(b+5,c)-d)).map(function(a,b){return d+b})}});Juno.filter("timeAgo",function(){return function(a,b,c){return{execute:function(d,a,b){var e;if(void 0===d||null===d||1>a)return null;d=new Date(d);if(void 0===a||null===a)a=1;b=void 0===b||null===b?new Date:
new Date(b);e=this.calculateDifference(b,d);if(0===e)return"just now";e=this.groupDifference(e);e=this.applyAccuracy(e,a);return this.toString(e,d>b)},calculateDifference:function(a,b){return Math.abs(Math.round((a-b)/1E3))},groupDifference:function(a){var b=[],c={year:31536E3,month:2678400,week:604800,day:86400,hour:3600,minute:60,second:1},e,f,g,h;for(e in c)f=c[e],g=Math.floor(a/f),h=this.formatGroup(g,e),(null!==h||0<b.length)&&b.push(h),a-=g*f;return b},formatGroup:function(a,b){return 1>a?null:
a+" "+b+(1<a?"s":"")},applyAccuracy:function(a,b){a.length=Math.min(a.length,b);return a},toString:function(a,b){var c;a=this.removeNullValues(a);c=this.joinArray(a);return b?"in "+c:c+" ago"},removeNullValues:function(a){var b,c=[];for(b=0;b!==a.length;b++)null!==a[b]&&c.push(a[b]);return c},joinArray:function(a){return 1===a.length?a[0]:a.slice(0,-1).join(" ")+" and "+a[a.length-1]}}.execute(a,b,c)}})})();
